<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>大数据分析平台</title>
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="/sysmanager/back/platform2/css/star-rating-svg.css" />
    <link rel="stylesheet" href="/sysmanager/back/platform2/css/index.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <script type="text/javascript" src="/sysmanager/back/platform2/js/libs/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="/sysmanager/back/platform2/js/jquery.star-rating-svg.min.js"></script>
    <script src="/sysmanager/back/echar/echarts.js"></script>
</head>
<body>
    <div class="contentRight" id="contentRightHeight">
    	<div class="rightDownSel" id="test">
           <div class="rightDownMain">
               <div class="downDetails" style="display: block;">
                   <div class="selectbox">
                       <div class="selemeTitle">
                           <div class="selemenu"><span>选择油站</span></div>
                           <div class="seleContent">
                              <div class="downCont">
                                  <div class="downNav">
                                      <a href="javascript:void(0);" class="titleCur">城市</a>
                                      <a href="javascript:void(0);" onclick="queryAdministriveRegionBy()">行政区</a>
                                      <a href="javascript:void(0);" onclick="querySalesAreaBy()">销售区</a>
                                      <a href="javascript:void(0);" onclick="queryGasolineBy()">商圈类型</a>
                                      <a href="javascript:void(0);" onclick="queryLocationBy()">位置</a>
                                      <a href="javascript:void(0);" onclick="queryOpenDateBy()">开业时间</a>
                                      <a href="javascript:void(0);" onclick="queryTypeBy()">油站类型</a>
                                      <a href="javascript:void(0);" onclick="queryStationBy()">站名</a>
                                  </div>

                                  <div class="downContInfo">
                                      <ul style="display: block;" id="citys">
                                      		
                                      </ul>
                                      <ul id="regions">
                                      		 
                                      </ul>
                                      <ul id="sales">
                                      		
                                      </ul>
                                      <ul id="gasolines">
                                      		
                                      
                                      </ul>
                                      <ul id="location">
                                         
                                      </ul>
                                      <ul id="openDate">
                                         
                                      </ul>
                                      <ul id="types">
                                      	
                                      </ul>
                                      <ul id="station">
                                          
                                      </ul>
                                  </div>
                              </div>
                              <div class="screenMain">
		                                  <ul id="tagContent">
		                                      
		                                  </ul>
		                       </div>
                              <div class="downOperation">
                                <a href="javascript:void(0);" class="determine" onclick="query()">确定</a>
                                <a href="javascript:void(0);" class="cancel">取消</a>
                              </div>
                           </div>
                       </div>
                       </div>
                       </div>
                       </div>
                       </div>
       <div class="dashboardMain">
           <div class="dashboardLeft"> 
               <!--油品销售情况-->
               <div class="oilSales">
                   <h2>油品销售情况</h2>
                   <div class="oilSalesProportion">
                       <div class="proportionOne">
                           <div class="proLeft">
                               <img src="images/dashboard/yuanPic.png">
                               <div class="proportionNum">
                                   <p id="monthRate"></p>
                                   <span>月T&R</span>
                               </div>
                           </div>
                           <div class="proRight">
                               <h3 id="monthSale"></h3>
                               <p>本月累计销量</p>
                           </div>
                       </div>
                       <script type="text/javascript">
                       $(function() {
						query();
					  });
                       function query() {
						queryOil();
						queryVip();
						queryShop();
					 }
                       function queryOil() {
                    	   $.ajax({
								type:"GET",
								url:"/sysmanager/oil/queryDashBoardByStation",
								data:{"citys":jqchk("citys"),"regions":jqchk("regions"),"sales":jqchk("sales"),
								"gasoline":jqchk("gasolines"),"locs":jqchk("location"),"openDate":jqchk("openDate"),"type":jqchk("type"),
								"station":jqchk("station")},
								success:function(map){
									$("#monthRate").text(map.monthRate);
									$("#monthSale").html(map.monthLitre);
									$("#yearTarget").html(map.yearRate);
									$("#yearLitre").html(map.yearLitre);
									var oilWeekAndTarget = echarts.init(document.getElementById('oilWeekAndTarget'));
				                       var dayGasolineAndDiesel = echarts.init(document.getElementById('dayGasolineAndDiesel'));
				                       var dayByOils = echarts.init(document.getElementById('dayByOils'));
				                       var monthGasolineAndDiesel = echarts.init(document.getElementById('monthGasolineAndDiesel'));
				                       var monthByOils = echarts.init(document.getElementById('monthByOils'));
									oilWeekAndTarget.setOption({
									    tooltip: {
									        trigger: 'axis',
									        formatter: '{b}<br>当日消费: {c}升 <br> 完成率:{c1}%'
									    },
									    color:['#FBCE07','#DD1D21'],
									    xAxis: {
									        type: 'category',
									        boundaryGap: true,
									        data: map.date,
									    },
									    grid: {
									    	top:'0',
									        left: '0',
									        right: '0',
									        bottom: '0',
									        containLabel: true
									    },
									    yAxis:[{
									    	show:false,
									        type: 'value',
									        axisLabel: {
												formatter: '{value} 升'
											}
									    },{
									    	show:false,
									        type: 'value',
									        axisLabel: {
												formatter: '{value} %'
											}
									    }] ,
									    series: [
									        {
									            name:'当日销量',
									            type:'bar',
									            data:map.litre
									        },
									        {
									            name:'达成率',
									            type:'line',
									            yAxisIndex: 1,
									            data:map.dayRate
									        }
									    ]
									});//Echarts绘制完成
									dayGasolineAndDiesel.setOption({
									    tooltip: {
									        trigger: 'axis',
									        formatter: '{b}:{c}升'
									    },
									    color:['#FBCE07','#DD1D21'],
									    xAxis: {
									        type: 'category',
									        boundaryGap: true,
									        data: ['当日柴油销量','当日汽油销量'],
									    },
									    grid: {
									    	top:'0',
									        left: '0',
									        right: '0',
									        bottom: '0',
									        containLabel: true
									    },
									    yAxis:[{
									    	show:false,
									        type: 'value',
									        axisLabel: {
												formatter: '{value} 升'
											}
									    }] ,
									    series: [
									        {
									            name:'当日销量',
									            type:'bar',
									            data:[map.dayDiesel,map.dayGasoline]
									        }
									    ]
									});//当天柴油汽油销量Echarts绘制完成
									dayByOils.setOption({
			     						tooltip : {
			     							trigger: 'item',
			     							formatter: "{a} <br/>{b} : {c} ({d}%)"
			     						},
			     						 grid: {
										    	top:'0',
										        left: '0',
										        right: '0',
										        bottom: '0',
										        containLabel: true
										    },
			     						color:['#FBCE07','#DD1D21','#89CFDC','#009EB4','#003C88',
			     						       '#BA95BE','#641964','#FFEAC2','#EB8705','#743410','#BED50F','#008433','#595959','#7F7F7F'],
			     						series : [
			     							{
			     								name: '当日销量',
			     								type: 'pie',
			     								radius : '55%',
			     								center: ['50%', '60%'],
			     								data:map.dayzhanbi,
			     								itemStyle: {
			     									emphasis: {
			     										shadowBlur: 10,
			     										shadowOffsetX: 0,
			     										shadowColor: 'rgba(0, 0, 0, 0.5)'
			     									}
			     								},
			     							}
			     						]
			     					});//当天柴油汽油销量Echarts绘制完成
			     					monthGasolineAndDiesel.setOption({
									    tooltip: {
									        trigger: 'axis',
									        formatter: '{b}:{c}升'
									    },
									    color:['#FBCE07','#DD1D21'],
									    xAxis: {
									        type: 'category',
									        boundaryGap: true,
									        data: ['本月柴油累计销量','本月汽油累计销量'],
									    },
									    grid: {
									    	top:'0',
									        left: '0',
									        right: '0',
									        bottom: '0',
									        containLabel: true
									    },
									    yAxis:[{
									    	show:false,
									        type: 'value',
									        axisLabel: {
												formatter: '{value} 升'
											}
									    }] ,
									    series: [
									        {
									            name:'本月累计销量',
									            type:'bar',
									            data:[map.monthDiesel,map.monthGasoline]
									        }
									    ]
									});//当天柴油汽油销量Echarts绘制完成
			     					
			     					
			     					monthByOils.setOption({
			     						tooltip : {
			     							trigger: 'item',
			     							formatter: "{a} <br/>{b} : {c} ({d}%)"
			     						},
			     						 grid: {
										    	top:'0',
										        left: '0',
										        right: '0',
										        bottom: '0',
										        containLabel: true
										    },
			     						color:['#FBCE07','#DD1D21','#89CFDC','#009EB4','#003C88',
			     						       '#BA95BE','#641964','#FFEAC2','#EB8705','#743410','#BED50F','#008433','#595959','#7F7F7F'],
			     						series : [
			     							{
			     								name: '本月累计销量',
			     								type: 'pie',
			     								radius : '55%',
			     								center: ['50%', '60%'],
			     								data:map.monthzhanbi,
			     								itemStyle: {
			     									emphasis: {
			     										shadowBlur: 10,
			     										shadowOffsetX: 0,
			     										shadowColor: 'rgba(0, 0, 0, 0.5)'
			     									}
			     								},
			     							}
			     						]
			     					});//当月柴油汽油销量Echarts绘制完成
								},
							});
					}
								
                       </script>
                       <div class="proportionOne">
                           <div class="proLeft">
                               <img src="images/dashboard/yuanPic.png">
                               <div class="proportionNum">
                                   <p id="yearTarget"></p>
                                   <span>年T&R</span>
                               </div>
                           </div>
                           <div class="proRight">
                               <h3 id="yearLitre"></h3>
                               <p>今年累计销量</p>
                           </div>
                       </div>
                       <div class="proportionTwo">
                           <div class="proLeft">
                               <img src="images/dashboard/yuantwoPic.png">
                               <div class="proportionNum">
                                   <p id="year">85%</p>
                                   <span>今年P&L达成率</span>
                               </div>
                           </div>
                       </div> 
                   </div>
                   <div class="verticalVolume" id="oilWeekAndTarget"><!-- 近一周销量 -->
                       <!-- <img src="images/dashboard/1.png"> -->
                   </div>
                   <div class="dieselasoline">
                       <div class="dieselasolineInfo">
                           <div class="infoLeft" id="dayGasolineAndDiesel" style="min-height: 150px"><!-- <img src="images/dashboard/2.png" > --></div>
                           <div class="infoRight" id="dayByOils" style="min-height: 150px"><!-- <img src="images/dashboard/3.png" > --></div>
                       </div>
                       <div class="dieselasolineInfo">
                           <div class="infoLeft" id="monthGasolineAndDiesel" style="min-height: 150px"><!-- <img src="images/dashboard/2.png" > --></div>
                           <div class="infoRight" id="monthByOils" style="min-height: 150px"><!-- <img src="images/dashboard/3.png" > --></div>
                       </div>
                   </div>
               </div>
               <!--便利店销售情况-->
               <div class="convenienceStore">
                   <h2>便利店销售情况</h2>
                   <div class="oilSalesProportion">
                       <div class="proportionOne">
                           <div class="proLeft">
                               <img src="images/dashboard/yuanPic.png">
                               <div class="proportionNum">
                                   <p>70%</p>
                                   <span>月T&R</span>
                               </div>
                           </div>
                           <div class="proRight">
                               <h3 id="shopMonthSales"></h3>
                               <p>本月累计销量</p>
                           </div>
                       </div>
                       <script type="text/javascript">
                       function queryShop() {
                    	   $.ajax({
   							type:"GET",
   							url:"/sysmanager/notOil/queryDashBoardByStation",
   							data:{"citys":jqchk("citys"),"regions":jqchk("regions"),"sales":jqchk("sales"),
   							"gasoline":jqchk("gasolines"),"locs":jqchk("location"),"openDate":jqchk("openDate"),"type":jqchk("type"),
   							"station":jqchk("station")},
   							success:function(map){
   								$("#shopMonthSales").html(map.monthSales);
   								$("#shopyearSales").html(map.yearSales);
   								$("#thousandRate").html(map.thousandRate);
   								$.each(map.topRate,function(i,top){
   									$("#top"+(i+1)).html(top.name);
   								});
   					var shopWeekSales = echarts.init(document.getElementById('shopWeekSales'));
   					shopWeekSales.setOption({
   					    tooltip: {
   					        trigger: 'axis',
   					        formatter: '{b}<br>当日消费: {c}元  <br> 完成率:{c1}%'
   					    },
   					    color:['#FBCE07','#DD1D21'],
   					    xAxis: {
   					        type: 'category',
   					        boundaryGap: true,
   					        data: map.dates,
   					    },
   					    grid: {
   					    	top:'0',
   					        left: '0',
   					        right: '0',
   					        bottom: '0',
   					        containLabel: true
   					    },
   					    yAxis:[{
   					    	show:false,
   					        type: 'value',
   					        axisLabel: {
   								formatter: '{value} 升'
   							}
   					    },{
   					    	show:false,
   					        type: 'value',
   					        axisLabel: {
   								formatter: '{value} %'
   							}
   					    }] ,
   					    series: [
   					        {
   					            name:'当日销量',
   					            type:'bar',
   					            data:map.moneys
   					        }
   					    ]
   					});//Echarts绘制完成
   							},
                          });
					}
                       
                       </script>
                       <div class="proportionOne">
                           <div class="proLeft">
                               <img src="images/dashboard/yuanPic.png">
                               <div class="proportionNum">
                                   <p id="shopyearTarget">70%</p>
                                   <span>年T&R</span>
                               </div>
                           </div>
                           <div class="proRight">
                               <h3 id="shopyearSales"></h3>
                               <p>今年累计销量</p>
                           </div>
                       </div>
                       <div class="proportionThree">
                          <h4 id="thousandRate">10.1</h4>
                          <p>当月销售额千升比</p>
                       </div>
                   </div>
                   <div class="verticalVolume" id="shopWeekSales">
                       <!-- <img src="images/dashboard/1.png"> -->
                   </div>
                   <div class="reachRate">
                       <h3>当月累计达成率TOP3</h3>
                       <ul>  
                           <li>
                                <img src="images/dashboard/shellIconOne.png">   
                                <span id="top1"></span>                             
                           </li>
                           <li>
                                <img src="images/dashboard/shellIcon.png">   
                                <span id="top2"></span>                             
                           </li>
                           <li>
                                <img src="images/dashboard/shellIconThree.png">   
                                <span id="top3"></span>                             
                           </li>
                       </ul>
                   </div>
               </div>
           </div>
           <div class="dashboardRight">
              <!--会员情况-->
              <div class="membership">
                  <h2>会员情况</h2>
                  <div class="memberDay" id="vipOil" style="min-height: 60px">
                      
                  </div>
                  <div style="min-height: 60px" class="memberDay" id="vipShop">
                      
                  </div>
                  <script type="text/javascript">
                  function queryVip() {
                	  var vipShop = echarts.init(document.getElementById('vipShop'));
                      var vipOil = echarts.init(document.getElementById('vipOil'));
                      $.ajax({
    						type:"GET",
    						url:"/sysmanager/addVip/queryDashBoardByStation",
    						data:{"citys":jqchk("citys"),"regions":jqchk("regions"),"sales":jqchk("sales"),
    						"gasoline":jqchk("gasolines"),"locs":jqchk("location"),"openDate":jqchk("openDate"),"type":jqchk("type"),
    						"station":jqchk("station")},
    						success:function(map){
    							$("#vipNow").html(map.vipnow);
    							$("#vipActiveRate").html(map.activity);
    							$("#vipActive").html(map.activeInteger);
    							$("#addVipDay").html(map.addDay);
    							$("#addVipMonth").html(map.addMonth);
    							$("#dayRecharge").html(map.dayRecharge);
    							$("#monthRecharge").html(map.monthRecharge);
    							$("#yearRecharge").html(map.yearRecharge);
    							$("#evaluationDayAmount").html(map.dayAmount);
    							$("#evaluationMonthAmount").html(map.monthAmount);
    							$("#dayStar").html(map.dayStar);
    							$("#monthStar").html(map.monthStar);
    							$("#oilCoupon").html(map.oilRate);
    							$("#shopCoupon").html(map.shopRate);
    							vipShop.setOption({
    							    tooltip: {
    							        trigger: 'axis',
    							        formatter: '{b}<br>会员当日便利店交易额: {c}元 '
    							    },
    							    color:['#FBCE07','#DD1D21'],
    							    xAxis: {
    							        type: 'category',
    							        boundaryGap: true,
    							        data: map.shopDates,
    							    },
    							    grid: {
    							    	top:'0',
    							        left: '0',
    							        right: '0',
    							        bottom: '0',
    							        containLabel: true
    							    },
    							    yAxis:[{
    							    	show:false,
    							        type: 'value',
    							        axisLabel: {
    										formatter: '{value} 升'
    									}
    							    },{
    							    	show:false,
    							        type: 'value',
    							        axisLabel: {
    										formatter: '{value} %'
    									}
    							    }] ,
    							    series: [
    							        {
    							            name:'会员当日便利店销量',
    							            type:'bar',
    							            data:map.shopDatas
    							        }
    							    ]
    							});//Echarts绘制完成
    							vipOil.setOption({
    							    tooltip: {
    							        trigger: 'axis',
    							        formatter: '{b}<br>会员当日油品销量: {c}升'
    							    },
    							    color:['#FBCE07','#DD1D21'],
    							    xAxis: {
    							        type: 'category',
    							        boundaryGap: true,
    							        data: map.oilDates,
    							    },
    							    grid: {
    							    	top:'0',
    							        left: '0',
    							        right: '0',
    							        bottom: '0',
    							        containLabel: true
    							    },
    							    yAxis:[{
    							    	show:false,
    							        type: 'value',
    							        axisLabel: {
    										formatter: '{value} 升'
    									}
    							    }] ,
    							    series: [
    							        {
    							            name:'会员当日油品销量',
    							            type:'bar',
    							            data:map.oilDatas
    							        }
    							    ]
    							});//Echarts绘制完成
    							var VipDayZhanbi = echarts.init(document.getElementById('VipDayZhanbi'));
    							VipDayZhanbi.setOption({
    							    tooltip: {
    							        trigger: 'item',
    							        formatter: "{a} <br/>{b}<br/>: {c} ({d}%)"
    							    },
    							    grid: {
    							    	top:'0',
    							        left: '0',
    							        right: '0',
    							        bottom: '0',
    							        containLabel: true
    							    },
    							    series: [
    							        {
    							            name:'交易占比',
    							            type:'pie',
    							            radius: ['60%', '70%'],
    							            label: {
    							                normal: {
    							                show:false,
    							                   
    							                }
    							            },
    							            data:map.dayVipOil
    							        },
    							       
    							        {
    							            name:'交易占比',
    							            type:'pie',
    							            label: {
    							                normal: {
    							                show:false,
    							                   
    							                }
    							            },
    							            radius: ['80%', '90%'],
    							            data:map.dayVipShop
    							        }
    							    ]
    							});
    							var VipMonthZhanbi = echarts.init(document.getElementById('VipMonthZhanbi'));
    							VipMonthZhanbi.setOption({
    							    tooltip: {
    							        trigger: 'item',
    							        formatter: "{a} <br/>{b}<br/>: {c} ({d}%)"
    							    },
    							    grid: {
    							    	top:'0',
    							        left: '0',
    							        right: '0',
    							        bottom: '0',
    							        containLabel: true
    							    },
    							    series: [
    							        {
    							            name:'交易占比',
    							            type:'pie',
    							            radius: ['60%', '70%'],
    							            label: {
    							                normal: {
    							                show:false,
    							                   
    							                }
    							            },
    							            data:map.monthVipOil
    							        },
    							       
    							        {
    							            name:'交易占比',
    							            type:'pie',
    							            label: {
    							                normal: {
    							                show:false,
    							                   
    							                }
    							            },
    							            radius: ['80%', '90%'],
    							            data:map.monthVipShop
    							        }
    							    ]
    							});
    							$("#evaluationDayStar").starRating({
    					            starSize: 25,
    								initialRating:map.dayStar,
    					            readOnly: true,
    					            useFullStars:false,
    					            disableAfterRate: false,
    					            
    					        });
    							$("#evaluationMonthStar").starRating({
    					            starSize: 25,
    								initialRating:map.monthStar,
    					            readOnly: true,
    					            useFullStars:false,
    					            disableAfterRate: false,
    					        });
    						},
    						
                      });
				}
                  </script>
                  <div class="transaction">
                      <div class="transactionTop">
                          <div class="transactionInfo" style="min-height: 200px" id="VipDayZhanbi"><!-- <img src="images/dashboard/transactionPic.png"> --></div>
                          <div class="transactionInfo" style="min-height: 200px" id="VipMonthZhanbi"><!-- <img src="images/dashboard/transactionPic.png"> --></div>
                          <div class="transactionTwo">
                              <img src="images/dashboard/yuanfourPic.png">
                              <div class="transacNum">
                                  <p id="oilCoupon"></p>
                                  <span>本月累计<br />油品优惠券核销率</span>
                              </div>
                          </div>
                          <div class="transactionTwo">
                              <img src="images/dashboard/yuanfourPic.png">
                              <div class="transacNum">
                                  <p id="shopCoupon">70%</p>
                                  <span>本月累计<br />便利店优惠券核销率</span>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <!--顾客评价-->
              <div class="customerEvaluation">
                  <h2>顾客评价</h2>
                  <div class="customerMain">
                      <div class="customerLeft">
                         <p>当日评价<em id="evaluationDayAmount"></em>条</p>
                         <div class="evaluationMain">
                             <span>当日评分</span>
                             <div class="evaluations" >
                                 <p id="dayStar" class="evalNum"></p>
                                 <div id="evaluationDayStar"></div>
                             </div>
                         </div>
                      </div>
                      <div class="customerRight">
                          <p>当月评价<em id="evaluationMonthAmount"></em>条</p>
                         <div class="evaluationMain">
                             <span>当月评分</span>
                             <div class="evaluations" id="evaluationMonthStar">
                                 <p id="monthStar" class="evalNum"></p>
                                 <div id="evaluationMonthStar"></div>
                             </div>
                         </div>
                      </div>
                  </div>
              </div>
              <!--系统日志-->
              <div class="systemLog">
                  <h2>系统日志</h2>
                  <div class="systemLogMain">
                      <span></span>
                      <p>十八里店油站数据传输异常。2017/12/6 10:25</p>
                  </div>
              </div>
           </div>
       </div>
       <p class="clause">Copyright © 1996-2017 shell Corporation, All Rights Reserved 版权所有  条款与条件 隐私政策  京ICP备12052876号</p>
    </div>
    <!--右边 结束-->
</body>
<script type="text/javascript" src="/sysmanager/back/platform2/js/index.js"></script>
<script type="text/javascript">navLeft();downTab();rightDown();</script>
</html>
